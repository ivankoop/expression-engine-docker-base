"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends.apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}/**
 * ExpressionEngine (https://expressionengine.com)
 *
 * @link      https://expressionengine.com/
 * @copyright Copyright (c) 2003-2019, EllisLab Corp. (https://ellislab.com)
 * @license   https://expressionengine.com/license
 */
var FileField=function(e){function t(e){var n;return _classCallCheck(this,t),n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"setFile",function(e){var t=n.getFieldContainer();EE.FileField.pickerCallback(e,{input_value:t.find("input.js-file-input"),input_img:t.find("img.js-file-image"),modal:$(".modal-file")}),n.setState({file:e})}),n.state={file:e.file},n}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;this.getFieldContainer().on("click","li.remove a",function(){e.setState({file:null})}).on("hasFile","input:hidden",function(t){e.setState({file:t})})}},{key:"getFieldContainer",value:function(){return $(this.props.thisField).closest(".grid-file-upload, .field-control")}},{key:"render",value:function(){return this.state.file?null:React.createElement(DragAndDropUpload,_extends({},this.props,{onFileUploadSuccess:this.setFile,marginTop:!1,multiFile:!1}))}}],[{key:"renderFields",value:function(e){$("div[data-file-field-react]",e).each(function(){var e=JSON.parse(window.atob($(this).data("fileFieldReact")));e.thisField=$(this),ReactDOM.render(React.createElement(t,e,null),this)})}}]),t}(React.Component);