"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}/*!
 * This source file is part of the open source project
 * ExpressionEngine (https://expressionengine.com)
 *
 * @link      https://expressionengine.com/
 * @copyright Copyright (c) 2003-2019, EllisLab Corp. (https://ellislab.com)
 * @license   https://expressionengine.com/license Licensed under Apache License, Version 2.0
 */
var MutableRelationshipField=function(){function e(n,t){_classCallCheck(this,e),this.field=n,this.options=t,this.bindAdd()}return _createClass(e,[{key:"bindAdd",value:function(){var e=this;this.field.closest("[data-relationship-react]").parent().find("[rel=add_new][data-channel-id]").on("click",function(n){n.preventDefault();var t=$(n.currentTarget);e.openPublishFormForChannel(t.data("channelId"),t.data("channelTitle")),t.closest(".sub-menu").length&&t.closest(".filters").find(".open").removeClass("open").siblings(".sub-menu").hide()})}},{key:"openPublishFormForChannel",value:function(e,n){var t=this;EE.cp.ModalForm.openForm({url:EE.relationship.publishCreateUrl.replace("###",e),full:!0,iframe:!0,success:this.options.success,load:function(e){var a=t.field.closest("[data-publish]").find("input[name=title]").val(),i=EE.relationship.lang.creatingNew.replace("#to_channel#",n).replace("#from_channel#",EE.publish.channel_title);a&&(i+="<b>: "+a+"</b>"),EE.cp.ModalForm.setTitle(i)}})}}]),e}();